/*! -v1.1.2 公农历日期选择器 MIT License  https://github.com/chenruifu/rui-datepicker#readme  By 羯瑞 */
 ;window.ruiDatepicker=function(){"classList"in document.documentElement||Object.defineProperty(HTMLElement.prototype,"classList",{get:function(){var n=this;function e(r){return function(e){var t=n.className.split(/\s+/g),a=t.indexOf(e);r(t,a,e),n.className=t.join(" ")}}return{add:e(function(e,t,a){~t||e.push(a)}),remove:e(function(e,t){~t&&e.splice(t,1)}),toggle:e(function(e,t,a){~t?e.splice(t,1):e.push(a)}),contains:function(e){return!!~n.className.split(/\s+/g).indexOf(e)},item:function(e){return n.className.split(/\s+/g)[e]||null}}}});var e=function(){this.gearDate,this.minY=1940,this.minM=1,this.minD=1,this.maxY=2020,this.maxM=12,this.maxD=31,this.type=1};return e.prototype={init:function(e){this.trigger=document.querySelector(e),this.bindEvent("date")},bindEvent:function(e){var h=this,M=[new a(38,0,0,38,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(26,6,2,44,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(45,0,3,49,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(35,0,4,54,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(24,4,5,59,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(43,0,0,5,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(32,0,1,10,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(21,2,2,15,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(40,0,3,20,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(28,7,5,26,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(47,0,6,31,0,1,1,0,1,1,0,0,1,0,1,0,1),new a(36,0,0,36,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(26,5,1,41,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(44,0,3,47,0,1,0,0,1,1,0,1,1,0,1,0,1),new a(33,0,4,52,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(23,3,5,57,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(42,0,6,2,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(30,8,1,8,1,0,1,0,1,0,0,1,0,1,0,1,0),new a(48,0,2,13,1,1,1,0,1,0,0,1,0,1,0,1,0),new a(38,0,3,18,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(27,6,4,23,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(45,0,6,29,1,0,1,0,1,0,1,1,0,1,0,1,0),new a(35,0,0,34,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(24,4,1,39,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(43,0,2,44,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(32,0,4,50,0,1,0,1,0,0,1,0,0,1,1,0,1),new a(20,3,5,55,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(39,0,6,0,1,1,0,1,1,0,0,1,0,1,0,1,0),new a(29,7,0,5,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(47,0,2,11,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(36,0,3,16,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(26,5,4,21,0,1,0,0,1,0,1,0,1,1,1,0,1),new a(45,0,5,26,0,1,0,0,1,0,1,0,1,1,0,1,1),new a(33,0,0,32,1,0,1,0,0,1,0,0,1,1,0,1,1),new a(22,4,1,37,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(41,0,2,42,1,1,0,1,0,0,1,0,0,1,0,1,1),new a(30,8,3,47,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(48,0,5,53,1,0,1,1,0,1,0,1,0,1,0,0,1),new a(37,0,6,58,1,0,1,1,0,1,1,0,1,0,1,0,1),new a(27,6,0,3,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(46,0,1,8,1,0,0,1,0,1,0,1,1,0,1,1,0),new a(35,0,3,14,0,1,0,0,1,0,0,1,1,0,1,1,1),new a(24,4,4,19,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(43,0,5,24,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(32,10,6,29,1,0,1,1,0,0,1,0,0,1,0,1,1),new a(50,0,1,35,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(39,0,2,40,0,1,1,0,1,1,0,1,0,1,0,0,1),new a(28,6,3,45,1,0,1,0,1,1,0,1,1,0,1,0,0),new a(47,0,4,50,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(36,0,6,56,1,0,0,1,0,1,0,1,0,1,1,1,0),new a(26,5,0,1,0,1,0,0,1,0,0,1,0,1,1,1,1),new a(45,0,1,6,0,1,0,0,1,0,0,1,0,1,1,1,0),new a(34,0,2,11,0,1,1,0,0,1,0,0,1,0,1,1,0),new a(22,3,4,17,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(40,0,5,22,1,1,1,0,1,0,1,0,0,1,0,1,0),new a(30,8,6,27,0,1,1,0,1,0,1,1,0,0,1,0,1),new a(49,0,0,32,0,1,0,1,1,0,1,0,1,1,0,0,1),new a(37,0,2,38,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(27,5,3,43,1,0,0,1,0,0,1,1,0,1,1,0,1),new a(46,0,4,48,1,0,0,1,0,0,1,0,1,1,1,0,1),new a(35,0,5,53,1,1,0,0,1,0,0,1,0,1,1,0,1),new a(23,4,0,59,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(42,0,1,4,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(31,0,2,9,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(21,2,3,14,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(39,0,5,20,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(28,7,6,25,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(48,0,0,30,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(37,0,1,35,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(25,5,3,41,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(44,0,4,46,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(33,0,5,51,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(22,4,6,56,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(40,0,1,2,1,0,1,0,0,1,0,1,0,1,0,1,0),new a(30,9,2,7,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(49,0,3,12,0,1,0,0,1,0,1,1,1,0,1,0,1),new a(38,0,4,17,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(27,6,6,23,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(46,0,0,28,0,1,0,1,0,0,1,0,1,0,1,1,0),new a(35,0,1,33,0,1,1,0,1,0,0,1,0,0,1,1,0),new a(24,4,2,38,0,1,1,1,0,1,0,0,1,0,1,0,1),new a(42,0,4,44,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(31,0,5,49,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(21,2,6,54,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(40,0,0,59,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(28,6,2,5,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(47,0,3,10,1,0,1,0,0,1,0,0,1,1,1,0,1),new a(36,0,4,15,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(25,5,5,20,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(43,0,0,26,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(32,0,1,31,1,1,0,1,1,0,1,0,1,0,1,0,0)];function t(e){document.activeElement.blur(),h.gearDate=document.createElement("div"),h.gearDate.className="gearDate",h.trigger.getAttribute("data-toid-hour")?h.gearDate.innerHTML='<div class="date_ctrl slideInUp"><div class="date_info_box lcalendar_info"></div><div class="date_choice_wrap"><div class="date_class_box"><div class="date_class lcalendar_gongli">公历</div><div class="date_class lcalendar_nongli">农历</div></div><div class="date_roll_mask"><div class="date_roll date_roll_more"><div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"></div></div><div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"></div></div><div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"></div></div><div><div class="gear date_hh" data-datetype="date_hh"></div><div class="date_grid"></div></div></div></div></div><div class="date_confirm_wrap"><div class="confirm_tit">请确认输入的时间是否正确</div><div class="confirm_p">公历：<b class="confirm_gongli"></b></div><div class="confirm_p">农历：<b class="confirm_nongli"></b></div></div><div class="date_btn_box"><div class="date_btn lcalendar_finish">完成</div><div class="date_btn lcalendar_cancel">取消</div></div></div>':h.gearDate.innerHTML='<div class="date_ctrl slideInUp"><div class="date_info_box lcalendar_info"></div><div class="date_choice_wrap"><div class="date_class_box"><div class="date_class lcalendar_gongli">公历</div><div class="date_class lcalendar_nongli">农历</div></div><div class="date_roll_mask"><div class="date_roll"><div><div class="gear date_yy" data-datetype="date_yy"></div><div class="date_grid"></div></div><div><div class="gear date_mm" data-datetype="date_mm"></div><div class="date_grid"></div></div><div><div class="gear date_dd" data-datetype="date_dd"></div><div class="date_grid"></div></div></div></div></div><div class="date_confirm_wrap"><div class="confirm_tit">请确认输入的时间是否正确</div><div class="confirm_p">公历：<b class="confirm_gongli"></b></div><div class="confirm_p">农历：<b class="confirm_nongli"></b></div></div><div class="date_btn_box"><div class="date_btn lcalendar_finish" data-isconfirm="0">完成</div><div class="date_btn lcalendar_cancel">取消</div></div></div>',document.body.appendChild(h.gearDate),function(){var e=new Date,t={yy:e.getYear(),mm:e.getMonth(),dd:e.getDate()-1};/^\d{4}-\d{1,2}-\d{1,2}$/.test(h.trigger.getAttribute("data-date"))?(rs=h.trigger.getAttribute("data-date").match(/(^|-)\d{1,4}/g),t.yy=rs[0]-h.minY,t.mm=rs[1].replace(/-/g,"")-1,t.dd=rs[2].replace(/-/g,"")-1):t.yy=t.yy+1900-h.minY;if(h.gearDate.querySelector(".date_yy").setAttribute("val",t.yy),h.gearDate.querySelector(".date_mm").setAttribute("val",t.mm),h.gearDate.querySelector(".date_dd").setAttribute("val",t.dd),h.gearDate.querySelector(".date_hh")){var a=0;h.trigger.getAttribute("data-hour")&&0<=h.trigger.getAttribute("data-hour")&&(a=parseInt(Math.round(h.trigger.getAttribute("data-hour"))+1)),h.gearDate.querySelector(".date_hh").setAttribute("val",a)}if(parseInt(h.trigger.getAttribute("data-type"))){h.type=1;var r=h.gearDate.querySelector(".lcalendar_nongli");r.className=r.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active";var n=h.maxY-h.minY+1,i=t.yy%n+h.minY,s=t.mm+1,d=t.dd+1,l=u(0,i,s,d),o=M[l.yy-h.minY].Intercalation?M[l.yy-h.minY].Intercalation:0;l.mm<0?l.mm=1-l.mm:o&&l.mm-1>=o&&(l.mm=l.mm+1),h.gearDate.querySelector(".date_yy").setAttribute("val",l.yy-h.minY),h.gearDate.querySelector(".date_mm").setAttribute("val",l.mm-1),h.gearDate.querySelector(".date_dd").setAttribute("val",l.dd-1)}else{h.type=0;var c=h.gearDate.querySelector(".lcalendar_gongli");c.className=c.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active"}v()}();var t="ontouchstart"in window;h.gearDate.querySelector(".lcalendar_cancel").addEventListener(t?"touchstart":"click",g),h.gearDate.querySelector(".lcalendar_finish").addEventListener(t?"touchstart":"click",f);var a=h.gearDate.querySelector(".lcalendar_gongli"),r=h.gearDate.querySelector(".lcalendar_nongli");a.addEventListener(t?"touchstart":"click",function(){l("gongli")},!1),r.addEventListener(t?"touchstart":"click",function(){l("nongli")},!1);var n=h.gearDate.querySelector(".date_yy"),i=h.gearDate.querySelector(".date_mm"),s=h.gearDate.querySelector(".date_dd"),d=h.gearDate.querySelector(".date_hh");n.addEventListener("touchstart",m),i.addEventListener("touchstart",m),s.addEventListener("touchstart",m),d&&d.addEventListener("touchstart",m),n.addEventListener("mousedown",c),i.addEventListener("mousedown",c),s.addEventListener("mousedown",c),d&&d.addEventListener("mousedown",c),n.addEventListener("touchmove",_),i.addEventListener("touchmove",_),s.addEventListener("touchmove",_),d&&d.addEventListener("touchmove",_),n.addEventListener("touchend",y),i.addEventListener("touchend",y),s.addEventListener("touchend",y),d&&d.addEventListener("touchend",y),h.gearDate.addEventListener("touchmove",function(e){e.preventDefault()}),0<navigator.userAgent.indexOf("Firefox")?(h.gearDate.addEventListener("DOMMouseScroll",function(e){e.preventDefault()},!1),n.addEventListener("DOMMouseScroll",o,!1),i.addEventListener("DOMMouseScroll",o,!1),s.addEventListener("DOMMouseScroll",o,!1),d&&d.addEventListener("DOMMouseScroll",o,!1)):(h.gearDate.onmousewheel=function(e){return!1},n.onmousewheel=o,i.onmousewheel=o,s.onmousewheel=o,d&&(d.onmousewheel=o))}function l(e){var t=h.gearDate.querySelector(".lcalendar_nongli"),a=h.gearDate.querySelector(".lcalendar_gongli"),r=0;if("nongli"==e&&1!=h.type?(t.className=t.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",a.className=a.className.replace(/active/,""),r=h.type=1):"gongli"==e&&0!=h.type&&(t.className=t.className.replace(/active/,""),a.className=a.className.replace(/active/,"").replace(/(^\s*)|(\s*$)/g,"")+" active",h.type=0,r=1),r){var n=h.maxY-h.minY+1,i=parseInt(Math.round(h.gearDate.querySelector(".date_yy").getAttribute("val"))),s=parseInt(Math.round(h.gearDate.querySelector(".date_mm").getAttribute("val")))+1,d=parseInt(Math.round(h.gearDate.querySelector(".date_dd").getAttribute("val")))+1,l=i%n+h.minY,o=(e=h.type?0:1,M[i].Intercalation?M[i].Intercalation:0);!h.type&&o&&(o==s-1?s=-(s-1):o<s-1?s-=1:s=s);var c=u(e,l,s,d),m=M[c.yy-h.minY].Intercalation?M[c.yy-h.minY].Intercalation:0;m&&h.type&&(c.mm<0?c.mm=1-c.mm:c.mm>m&&(c.mm=c.mm+1)),h.gearDate.querySelector(".date_yy").setAttribute("val",c.yy-h.minY),h.gearDate.querySelector(".date_mm").setAttribute("val",c.mm-1),h.gearDate.querySelector(".date_dd").setAttribute("val",c.dd-1),h.gearDate.querySelector(".date_yy").setAttribute("top",""),v()}}function v(){var e=h.maxY-h.minY+1,t=h.gearDate.querySelector(".date_yy"),a="";if(t&&t.getAttribute("val")){for(var r=parseInt(t.getAttribute("val")),n=0;n<=e-1;n++)a+="<div class='tooth'>"+(h.minY+n)+"</div>";t.innerHTML=a;var i=Math.floor(parseFloat(t.getAttribute("top")));if(isNaN(i))t.style.transform="translate(0,"+(8-2*r)+"em)",t.style["-webkit-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-moz-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-ms-transform"]="translate(0,"+(8-2*r)+"em)",t.style["-o-transform"]="translate(0,"+(8-2*r)+"em)",t.setAttribute("top",8-2*r+"em");else{i%2==0?i=i:i+=1,8<i&&(i=8);var s=8-2*(e-1);i<s&&(i=s),t.style.transform="translate(0,"+i+"em)",t.style["-webkit-transform"]="translate(0,"+i+"em)",t.style["-moz-transform"]="translate(0,"+i+"em)",t.style["-ms-transform"]="translate(0,"+i+"em)",t.style["-o-transform"]="translate(0,"+i+"em)",t.setAttribute("top",i+"em"),r=Math.abs(i-8)/2,t.setAttribute("val",r)}var d=h.gearDate.querySelector(".date_mm");if(d&&d.getAttribute("val")){a="";var l=parseInt(d.getAttribute("val")),o=M[r].Intercalation?M[r].Intercalation:0;if(o&&h.type)var c=12;else c=11;var m=0;r==e-1&&(c=(h.type,h.maxM-1)),0==r&&(m=h.type?h.minM-1:h.minM);for(n=0;n<c-m+1;n++){var v=m+n+1;h.type&&(v=o&&o==n?b("rm",v-1):b("mm",o&&o<n?v-1:v)),a+="<div class='tooth'>"+v+"</div>"}d.innerHTML=a,c<l?(l=c,d.setAttribute("val",l)):l<m&&(l=c,d.setAttribute("val",l)),d.style.transform="translate(0,"+(8-2*(l-m))+"em)",d.style["-webkit-transform"]="translate(0,"+(8-2*(l-m))+"em)",d.style["-moz-transform"]="translate(0,"+(8-2*(l-m))+"em)",d.style["-ms-transform"]="translate(0,"+(8-2*(l-m))+"em)",d.style["-o-transform"]="translate(0,"+(8-2*(l-m))+"em)",d.setAttribute("top",8-2*(l-m)+"em");var u=h.gearDate.querySelector(".date_dd");if(u&&u.getAttribute("val")){a="";var _=parseInt(u.getAttribute("val")),y=w(r,l)-1,g=0;r==e-1&&12==l+1&&(y=h.type?h.maxD-15:h.maxD-1),0==r&&2==l+1&&(g=h.type?h.minD-1:h.minD+6);for(n=0;n<y-g+1;n++){a+="<div class='tooth'>"+(v=h.type?b("dd",g+n+1):g+n+1)+"</div>"}u.innerHTML=a,y<_?(_=y,u.setAttribute("val",_)):_<g&&(_=g,u.setAttribute("val",_)),u.style.transform="translate(0,"+(8-2*(_-g))+"em)",u.style["-webkit-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.style["-moz-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.style["-ms-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.style["-o-transform"]="translate(0,"+(8-2*(_-g))+"em)",u.setAttribute("top",8-2*(_-g)+"em");var p=h.gearDate.querySelector(".date_hh");if(p&&p.getAttribute("val")){var f=parseInt(p.getAttribute("val"));a="<div class='tooth'>未知</div>";for(n=0;n<24;n++){a+="<div class='tooth'>"+(v=h.type?b("hh",n):n)+"时</div>"}p.innerHTML=a,p.style.transform="translate(0,"+(8-2*f)+"em)",p.style["-webkit-transform"]="translate(0,"+(8-2*f)+"em)",p.style["-moz-transform"]="translate(0,"+(8-2*f)+"em)",p.style["-ms-transform"]="translate(0,"+(8-2*f)+"em)",p.style["-o-transform"]="translate(0,"+(8-2*f)+"em)",p.setAttribute("top",8-2*f+"em")}D()}}}}function w(e,t){return 1==h.type?M[e].MonthDays[t]?30:29:1==t?(e+=h.minY)%4==0&&e%100!=0||e%400==0&&e%4e3!=0?29:28:3==t||5==t||8==t||10==t?30:31}function b(e,t){return"rm"==e?["闰正月","闰二月","闰三月","闰四月","闰五月","闰六月","闰七月","闰八月","闰九月","闰十月","闰冬月","闰腊月"][t-1]:"mm"==e?["正月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t-1]:"dd"==e?["初一","初二","初三","初四","初五","初六","初七","初八","初九","初十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十","廿一","廿二","廿三","廿四","廿五","廿六","廿七","廿八","廿九","三十","三十一"][t-1]:"hh"==e?["0子","1丑","2丑","3寅","4寅","5卯","6卯","7辰","8辰","9巳","10巳","11午","12午","13未","14未","15申","16申","17酉","18酉","19戌","20戌","21亥","22亥","23子"][t]:void 0}function u(e,t,a,r){var n=t,i=a,s=r,d=[0,31,59,90,120,151,181,212,243,273,304,334,365,396,0,31,60,91,121,152,182,213,244,274,305,335,366,397];if(0==e){var l=parseInt(n),o=parseInt(i),c=parseInt(s),m=o-1,v=S(l),u=((D=d[14*v+m]+c)+M[h=l-1940].BaseKanChih)%60;if(u=u<22?22-u:82-u,(u+=3)<10&&(u+=60),D<=M[h].BaseDays)h--,D=d[14*(v=S(_=l-1))+(m+=12)]+c;else var _=l;var y=M[h].BaseDays;for(A=0;A<13;A++){var g=y+M[h].MonthDays[A]+29;if(D<=g)break;y=g}var p=A+1,f=D-y;return 0!=(w=M[h].Intercalation)&&w<p&&--p==w&&(p=-w),12<p&&(p-=12),{yy:_,mm:p,dd:f}}_=parseInt(n),p=parseInt(i),f=parseInt(s);var h,w,b=p;0!=(w=M[h=_-1940].Intercalation)&&(w<b?b++:b==-w&&(b=w+1)),b--;for(var D=0,A=0;A<b;A++)D+=M[h].MonthDays[A]+29;D+=M[h].BaseDays+f;for(v=S(_),A=13;0<=A&&!(d[14*v+A]<D);A--);if(A<=11)l=_,o=A+1;else l=_+1,o=A-11;return{yy:l,mm:o,dd:c=D-d[14*v+A]}}function S(e){return e%400==0?1:e%100==0?0:e%4==0?1:0}function a(e,t,a,r,n,i,s,d,l,o,c,m,v,u,_,y,g){this.BaseDays=e,this.Intercalation=t,this.BaseWeekday=a,this.BaseKanChih=r,this.MonthDays=[n,i,s,d,l,o,c,m,v,u,_,y,g]}function o(e){var t=((e=e||event).wheelDelta?0<e.wheelDelta:e.detail<0)?21:-21;e.preventDefault();for(var a=e.target;!a.classList.contains("gear");)a=a.parentElement;clearInterval(a["int_"+a.id]),a["old_"+a.id]=0,a["o_t_"+a.id]=(new Date).getTime();var r=a.getAttribute("top");a["o_d_"+a.id]=r?parseFloat(r.replace(/em/g,"")):0,a["new_"+a.id]=t,a["n_t_"+a.id]=(new Date).getTime()+360;var n=18*(a["new_"+a.id]-a["old_"+a.id])/370;a["pos_"+a.id]=a["o_d_"+a.id]+n,a.setAttribute("top",a["pos_"+a.id]+"em");var i=(a["new_"+a.id]-a["old_"+a.id])/(a["n_t_"+a.id]-a["o_t_"+a.id]);return Math.abs(i)<=.2?a["spd_"+a.id]=i<0?-.08:.08:Math.abs(i)<=.5?a["spd_"+a.id]=i<0?-.16:.16:a["spd_"+a.id]=i/2,a["pos_"+a.id]||(a["pos_"+a.id]=0),e.preventDefault&&e.preventDefault(),s(a),!1}function c(e){e.preventDefault();for(var t=e.target,r=t,n=!1;!t.classList.contains("gear");)t=t.parentElement;clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.screenY,t["o_t_"+t.id]=(new Date).getTime();var a=t.getAttribute("top");t["o_d_"+t.id]=a?parseFloat(a.replace(/em/g,"")):0,document.onmousemove=function(e){n=!0,(e=e||window.event).preventDefault();for(var t=r;!t.classList.contains("gear");)t=t.parentElement;t["new_"+t.id]=e.screenY,t["n_t_"+t.id]=(new Date).getTime();var a=18*(t["new_"+t.id]-t["old_"+t.id])/370;t["pos_"+t.id]=t["o_d_"+t.id]+a,t.style.transform="translate(0,"+t["pos_"+t.id]+"em)",t.style["-webkit-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-moz-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-ms-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-o-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.setAttribute("top",t["pos_"+t.id]+"em")},document.onmouseup=function(e){if(!n)return document.onmousemove=null,document.onmouseup=null,!1;(e=e||window.event).preventDefault();for(var t=r;!t.classList.contains("gear");)t=t.parentElement;var a=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(a)<=.2?t["spd_"+t.id]=a<0?-.08:.08:Math.abs(a)<=.5?t["spd_"+t.id]=a<0?-.16:.16:t["spd_"+t.id]=a/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),s(t),document.onmousemove=null,document.onmouseup=null}}function m(e){e.preventDefault();var t=e.target;for(t.touchTip=!1;!t.classList.contains("gear");)t=t.parentElement;clearInterval(t["int_"+t.id]),t["old_"+t.id]=e.targetTouches[0].screenY,t["o_t_"+t.id]=(new Date).getTime();var a=t.getAttribute("top");t["o_d_"+t.id]=a?parseFloat(a.replace(/em/g,"")):0}function _(e){e.preventDefault();var t=e.target;for(t.touchTip=!0;!t.classList.contains("gear");)t=t.parentElement;t["new_"+t.id]=e.targetTouches[0].screenY,t["n_t_"+t.id]=(new Date).getTime();var a=18*(t["new_"+t.id]-t["old_"+t.id])/370;t["pos_"+t.id]=t["o_d_"+t.id]+a,t.style.transform="translate(0,"+t["pos_"+t.id]+"em)",t.style["-webkit-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-moz-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-ms-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.style["-o-transform"]="translate(0,"+t["pos_"+t.id]+"em)",t.setAttribute("top",t["pos_"+t.id]+"em")}function y(e){e.preventDefault();var t=e.target;if(!t.touchTip)return!1;for(;!t.classList.contains("gear");)t=t.parentElement;var a=(t["new_"+t.id]-t["old_"+t.id])/(t["n_t_"+t.id]-t["o_t_"+t.id]);Math.abs(a)<=.2?t["spd_"+t.id]=a<0?-.08:.08:Math.abs(a)<=.5?t["spd_"+t.id]=a<0?-.16:.16:t["spd_"+t.id]=a/2,t["pos_"+t.id]||(t["pos_"+t.id]=0),s(t)}function s(u){var _=0,y=!1,g=h.maxY-h.minY+1;clearInterval(u["int_"+u.id]),u["int_"+u.id]=setInterval(function(){var e=u["pos_"+u.id],t=u["spd_"+u.id]*Math.exp(-.03*_);if(e+=t,.1<Math.abs(t));else{t=.1;var a=2*Math.round(e/2);Math.abs(e-a)<.02?y=!0:a<e?e-=t:e+=t}switch(8<e&&(e=8,y=!0),u.getAttribute("data-datetype")){case"date_yy":if(e<(v=8-2*(g-1))&&(e=v,y=!0),y){var r=Math.abs(e-8)/2;p(u,r),clearInterval(u["int_"+u.id])}break;case"date_mm":var n=h.gearDate.querySelector(".date_yy"),i=parseInt(n.getAttribute("val"));if((M[i].Intercalation?M[i].Intercalation:0)&&h.type)var s=12;else s=11;var d=0;if(i==g-1&&(s=(h.type,h.maxM-1)),0==i&&(d=h.type?h.minM-1:h.minM),e<(v=8-2*(s-d))&&(e=v,y=!0),y){r=Math.abs(e-8)/2+d;p(u,r),clearInterval(u["int_"+u.id])}break;case"date_dd":n=h.gearDate.querySelector(".date_yy");var l=h.gearDate.querySelector(".date_mm"),o=(i=parseInt(n.getAttribute("val")),parseInt(l.getAttribute("val"))),c=w(i,o)-1,m=0;if(i==g-1&&12==o+1&&(c=h.type?h.maxD-15:h.maxD-1),0==i&&2==o+1&&(m=h.type?h.minD-1:h.minD+6),e<(v=8-2*(c-m))&&(e=v,y=!0),y){r=Math.abs(e-8)/2+m;p(u,r),clearInterval(u["int_"+u.id])}break;case"date_hh":var v;if(e<(v=-40)&&(e=v,y=!0),y){r=Math.abs(e-8)/2;p(u,r),clearInterval(u["int_"+u.id])}}u["pos_"+u.id]=e,u.style.transform="translate(0,"+e+"em)",u.style["-webkit-transform"]="translate(0,"+e+"em)",u.style["-moz-transform"]="translate(0,"+e+"em)",u.style["-ms-transform"]="translate(0,"+e+"em)",u.style["-o-transform"]="translate(0,"+e+"em)",u.setAttribute("top",e+"em"),_++},6)}function p(e,t){t=Math.round(t),e.setAttribute("val",t),v()}function g(e,t){var a=h.gearDate.querySelector(".lcalendar_finish"),r=h.gearDate.querySelector(".lcalendar_cancel");if(e.preventDefault(),a.getAttribute("data-isconfirm")-0&&!t)return D(),a.setAttribute("data-isconfirm",0),h.gearDate.querySelector(".date_choice_wrap").style.display="block",h.gearDate.querySelector(".date_confirm_wrap").style.display="none",a.innerHTML="完成",!(r.innerHTML="取消");if(!window.CustomEvent){var n=new CustomEvent("input");h.trigger.dispatchEvent(n)}document.body.removeChild(h.gearDate)}function f(e){var t=D(),a=h.gearDate.querySelector(".lcalendar_finish"),r=h.gearDate.querySelector(".lcalendar_cancel");if(!(a.getAttribute("data-isconfirm")-0)&&"false"!=h.trigger.getAttribute("data-confirm")){var n=h.gearDate.querySelector(".lcalendar_info"),i=h.gearDate.querySelector(".confirm_nongli"),s=h.gearDate.querySelector(".confirm_gongli");h.gearDate.querySelector(".date_choice_wrap").style.display="none",h.gearDate.querySelector(".date_confirm_wrap").style.display="block",a.setAttribute("data-isconfirm",1),n.innerHTML="确认日期",a.innerHTML="确认",r.innerHTML="返回修改";var d="",l="";t.hh&&(t.hh<0?l=d="时辰未知":(l=t.hh+"时",d=b("hh",t.hh)+"时")),s.innerHTML=t.yy+"年"+t.mm+"月"+t.dd+"日 "+l;var o=t._mm<0?b("rm",-t._mm):b("mm",t._mm);return i.innerHTML=t._yy+"年"+o+b("dd",t._dd)+" "+d,!1}h.trigger.setAttribute("data-date",t.yy+"-"+t.mm+"-"+t.dd),h.trigger.setAttribute("data-hour",t.hh);var c=h.trigger.getAttribute("data-toid-date"),m=h.trigger.getAttribute("data-toid-hour");c&&(document.getElementById(c).value=t.yy+"-"+t.mm+"-"+t.dd),m&&(document.getElementById(m).value=t.hh<0?"":t.hh);var v="";if(h.type){o=t._mm<0?b("rm",-t._mm):b("mm",t._mm);m&&(v=t.hh<0?"时辰未知":b("hh",t.hh)+"时"),h.trigger.value="农历:"+t._yy+"年"+o+b("dd",t._dd)+" "+v}else m&&(v=t.hh<0?"时辰未知":t.hh+"时"),h.trigger.value="公历:"+t.yy+"-"+t.mm+"-"+t.dd+" "+v;g(e,"finish")}function D(){var e=h.maxY-h.minY+1,t=parseInt(Math.round(h.gearDate.querySelector(".date_yy").getAttribute("val"))),a=t%e+h.minY,r=parseInt(Math.round(h.gearDate.querySelector(".date_mm").getAttribute("val")))+1,n=parseInt(Math.round(h.gearDate.querySelector(".date_dd").getAttribute("val")))+1,i=h.gearDate.querySelector(".date_hh")?1:0;if(i)var s=parseInt(Math.round(h.gearDate.querySelector(".date_hh").getAttribute("val")))-1;var d=M[t].Intercalation?M[t].Intercalation:0;h.type&&d&&(d==r-1?r=-(r-1):d<r-1?r-=1:r=r);var l=u(h.type,a,r,n),o=h.gearDate.querySelector(".lcalendar_info");if(h.type){h.trigger.setAttribute("data-type",1);var c=r<0?b("rm",-r):b("mm",r),m="";return i&&(m=s<0?"时辰未知":b("hh",s)+"时"),o.innerHTML="农历:"+a+"年"+c+b("dd",n)+" "+m,{yy:l.yy,mm:l.mm,dd:l.dd,_yy:a,_mm:r,_dd:n,hh:s}}h.trigger.setAttribute("data-type",0);m="";return i&&(m=s<0?"时辰未知":s+"时"),o.innerHTML="公历:"+a+"年"+r+"月"+n+"日 "+m,{_yy:l.yy,_mm:l.mm,_dd:l.dd,yy:a,mm:r,dd:n,hh:s}}var r=!1,n=0;"ontouchstart"in window?(h.trigger.addEventListener("touchstart",function(e){n=Date.now()}),h.trigger.addEventListener("touchmove",function(e){r=!0}),h.trigger.addEventListener("touchend",function(e){!r&&Date.now()-n<150&&(e.preventDefault(),t()),r=!1,n=0})):h.trigger.addEventListener("click",function(){t()})}},e}();